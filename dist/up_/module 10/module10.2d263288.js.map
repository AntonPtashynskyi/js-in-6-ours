{"mappings":"AAEA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAWF,SAASC,cAAc,6BAClCE,EAAYH,SAASC,cAAc,aAEnCG,EAAiB,wBCJnBC,KAAKC,YAAc,GACnBD,KAAKE,KAAO,EAGdC,cAAcC,GACZ,MAAMC,EAAG,uCAA0CL,KAAKC,4CAA4CD,KAAKE,OAOzG,OAAOI,MAAMD,EANG,CACdE,QAAS,CACPC,cAAe,sCAKhBC,MAAMC,GAAaA,EAASC,SAC5BF,MAAI,EAAGG,SAACA,MACPZ,KAAKE,MAAQ,EAENU,KAERC,OAAOC,IACNC,QAAQC,MAAMF,MAIpBG,YACEjB,KAAKE,KAAO,EAGVgB,YACF,OAAOlB,KAAKC,YAGViB,UAAMC,GACRnB,KAAKC,YAAckB,aDTdC,EAAeR,GACtBd,EAAUuB,mBAAmB,qBAGfT,GACd,OAAOA,EACJU,KAAG,EACAC,OAACA,EAAMC,YAAEA,EAAWC,WAAEA,EAAUC,MAAEA,EAAKrB,IAAEA,KAAK,+EAEnBoB,mFAENC,oCACFF,uBACZnB,kEAIVsB,KAAK,IAhBkCC,CAAOhB,IAnBnDlB,EAAWmC,iBAAiB,mBAGVC,GAChBA,EAAEC,iBAEFhC,EAAemB,MAAQY,EAAEE,cAAcC,SAASf,MAAMgB,MACtDnC,EAAekB,YACflB,EAAeI,gBAAgBM,MAAMG,IA+BrCd,EAAUqC,UAAY,GA7BpBf,EAAeR,SATnBf,EAASgC,iBAAiB,oBAcxB9B,EAAeI,gBAAgBM,KAAKW","sources":["module 10/classesCoding.js","module 10/api-service.js"],"sourcesContent":["import NewsApiService from './api-service.js';\r\n\r\nconst searchForm = document.querySelector('.search-form');\r\nconst loadMore = document.querySelector('[data-action=\"load-more\"]');\r\nconst container = document.querySelector('.articles');\r\n\r\nconst newsApiService = new NewsApiService();\r\n\r\nsearchForm.addEventListener('submit', onSearch);\r\nloadMore.addEventListener('click', onLoadMore);\r\n\r\nfunction onSearch(e) {\r\n  e.preventDefault();\r\n\r\n  newsApiService.query = e.currentTarget.elements.query.value; // получает доступ к методу класса set query и в конструктор класса записывает свойство query.\r\n  newsApiService.resetPage();\r\n  newsApiService.fetchArticles().then((articles) => {\r\n    clearArticlesContainer();\r\n    renderArticles(articles);\r\n  });\r\n}\r\n\r\nfunction onLoadMore() {\r\n  newsApiService.fetchArticles().then(renderArticles);\r\n}\r\n\r\nfunction renderArticles(articles) {\r\n  container.insertAdjacentHTML('beforeend', markup(articles));\r\n}\r\n\r\nfunction markup(articles) {\r\n  return articles\r\n    .map(\r\n      ({ author, description, urlToImage, title, url }) =>\r\n        ` <div class=\"card\" style=\"width: 18rem;\">\r\n  <img class=\"card-img-top\" src=\"${urlToImage}\" alt=\"Card image cap\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">${title}</h5>\r\n    <p class=\"card-text\">${description}</p>\r\n    <a href=\"${url}\" class=\"btn btn-primary\">Go somewhere</a>\r\n  </div>\r\n</div>`\r\n    )\r\n    .join('');\r\n}\r\n\r\nfunction clearArticlesContainer() {\r\n  container.innerHTML = '';\r\n}\r\n","export default class NewsApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchArticles(q) {\r\n    const url = `https://newsapi.org/v2/everything?q=${this.searchQuery}&language=en&pageSize=10&page=${this.page}`;\r\n    const options = {\r\n      headers: {\r\n        Authorization: 'b29d46388ca946e8ba8f7c84607dbf2d',\r\n      },\r\n    };\r\n\r\n    return fetch(url, options)\r\n      .then((response) => response.json())\r\n      .then(({ articles }) => {\r\n        this.page += 1;\r\n\r\n        return articles;\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n"],"names":["$44299e60660d81fe$var$searchForm","document","querySelector","$44299e60660d81fe$var$loadMore","$44299e60660d81fe$var$container","$44299e60660d81fe$var$newsApiService","this","searchQuery","page","fetchArticles","q","url","fetch","headers","Authorization","then","response","json","articles","catch","err","console","error","resetPage","query","newQuery","$44299e60660d81fe$var$renderArticles","insertAdjacentHTML","map","author","description","urlToImage","title","join","$44299e60660d81fe$var$markup","addEventListener","e","preventDefault","currentTarget","elements","value","innerHTML"],"version":3,"file":"module10.2d263288.js.map"}