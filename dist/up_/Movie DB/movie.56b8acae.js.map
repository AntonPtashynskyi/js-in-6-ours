{"mappings":"AAEA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,mBACjCE,EAAmBH,SAASC,cAAc,gCAC1CG,EAAeJ,SAASK,eAAe,iBACvCC,EAAcN,SAASK,eAAe,iBAE5CN,EAAWQ,iBAAiB,mBAkDNC,GACpBA,EAAEC,iBACFC,EAAcF,EAAEG,cAAcC,SAASC,MAAMC,MAC7CC,EAAc,EACdC,IACAC,OAtDFd,EAAiBI,iBAAiB,kBAsCDC,GAC/B,GAA2B,sBAAvBA,EAAEU,OAAOC,UAEX,OAEFJ,EAAcK,OAAOZ,EAAEU,OAAOG,aAE9BJ,IACAD,OA7CFZ,EAAaG,iBAAiB,oBAiC5BQ,EAAc,EACdE,OAjCFX,EAAYC,iBAAiB,oBA2B3BQ,EAAcO,EACdL,OA1BF,IAAIF,EAAc,EACdO,EAAY,EACZZ,EAAc,GAElB,IACEO,IACA,MAAOM,GACPC,QAAQC,IAAIF,kBAGCN,IACb,IAAIS,EAAQ,GAEVA,EADEhB,uBCtBkCiB,EAAaC,EAAO,GAC1D,MAAMC,QAAiBC,MAAK,2GAC0CH,UAAoBC,yBAE1F,aAAaC,EAASE,ODmBNC,CAAkBtB,EAAaK,wBChBRa,EAAO,GAC9C,MAAMC,QAAiBC,MAAK,iGACgCF,KAG5D,aAAaC,EAASE,ODaNE,CAAmBlB,YAsFhBW,GACnB,MAAMQ,EAASR,EAAMS,QAClBC,KAAG,EAAGC,MAACA,EAAKC,aAAEA,EAAYC,YAAEA,KAGrB,6KAiBXA,yIAnB2BF,EAAMG,UAAU,EAAG,8JAtF7CC,CAAYf,GACZX,EAAcW,EAAME,KACpBN,EAAYI,EAAMgB,YAClB1B,aAgCOA,IACPZ,EAAauC,UAAUC,IAAI,UAEvB7B,EAAc,GAChBX,EAAauC,UAAUE,OAAO,UAE5B9B,IAAgBO,GAClBhB,EAAYqC,UAAUC,IAAI,UAExB7B,EAAcO,GAChBhB,EAAYqC,UAAUE,OAAO,UAG/B,MACMX,WAesBY,GAC5B,MAAMC,EAAiB,GACvB,GAAoB,IAAhBD,EACF,IAAK,IAAIE,EAAI,EAAGA,GAAK,EAAGA,GAAK,EAC3BD,EAAeE,KAAKD,GAIxB,GAAIF,IAAgBxB,EAAW,CAC7B,IAAK,IAAI0B,EAAIF,EAAaE,EAAI1B,EAAY,EAAG0B,GAAK,EAChDD,EAAeE,KAAKD,GAEtB,OAAOD,EAAeG,UACbJ,EAAc,GACvBC,EAAeE,KAAKH,EAAc,EAAGA,EAAaA,EAAc,GAElE,OAAOC,EAhCOI,CAAqBpC,GAEhCqB,KAAKgB,GACAA,IAASrC,EACL,6EAA8EqC,aAGhF,qDAAsDA,eAE7DC,KAAK,IAERlD,EAAiBmD,UAAY,GAC7BnD,EAAiBoD,mBAAmB,YAAarB","sources":["Movie DB/movie.js","Movie DB/components/fetchMovie.js"],"sourcesContent":["import { fetchSearchMovies, fetchPopularMovies } from './components/fetchMovie';\r\n\r\nconst searchForm = document.querySelector('.search-form');\r\nconst gallery = document.querySelector('.container-body');\r\nconst paginationButton = document.querySelector('.pagination-container-button');\r\nconst firstPageBtn = document.getElementById('fist-page-btn');\r\nconst lastPageBtn = document.getElementById('last-page-btn');\r\n\r\nsearchForm.addEventListener('submit', onSubmitForm);\r\npaginationButton.addEventListener('click', onPaginationButtonClick);\r\nfirstPageBtn.addEventListener('click', onFirstPageBtnClick);\r\nlastPageBtn.addEventListener('click', onLastPageBtnClick);\r\n\r\nlet currentPage = 1;\r\nlet totalPage = 1;\r\nlet searchQuery = '';\r\n\r\ntry {\r\n  fetchMovies();\r\n} catch (error) {\r\n  console.log(error);\r\n}\r\n\r\nasync function fetchMovies() {\r\n  let films = {};\r\n  if (searchQuery) {\r\n    films = await fetchSearchMovies(searchQuery, currentPage);\r\n  } else {\r\n    films = await fetchPopularMovies(currentPage);\r\n  }\r\n\r\n  renderFilms(films);\r\n  currentPage = films.page;\r\n  totalPage = films.total_pages;\r\n  renderPagination();\r\n}\r\n\r\nfunction onLastPageBtnClick() {\r\n  currentPage = totalPage;\r\n  fetchMovies();\r\n}\r\n\r\nfunction onFirstPageBtnClick() {\r\n  currentPage = 1;\r\n  fetchMovies();\r\n}\r\n\r\nfunction onPaginationButtonClick(e) {\r\n  if (e.target.className !== 'pagination-button') {\r\n    // isNaN\r\n    return;\r\n  }\r\n  currentPage = Number(e.target.textContent);\r\n\r\n  fetchMovies();\r\n  renderPagination();\r\n}\r\n\r\nfunction onSubmitForm(e) {\r\n  e.preventDefault();\r\n  searchQuery = e.currentTarget.elements.query.value;\r\n  currentPage = 1;\r\n  renderPagination();\r\n  fetchMovies();\r\n}\r\n\r\nfunction renderPagination() {\r\n  firstPageBtn.classList.add('hidden');\r\n\r\n  if (currentPage > 1) {\r\n    firstPageBtn.classList.remove('hidden');\r\n  }\r\n  if (currentPage === totalPage) {\r\n    lastPageBtn.classList.add('hidden');\r\n  }\r\n  if (currentPage < totalPage) {\r\n    lastPageBtn.classList.remove('hidden');\r\n  }\r\n\r\n  const array = createArrayOfNumbers(currentPage);\r\n  const markup = array\r\n    .map((item) => {\r\n      if (item === currentPage) {\r\n        return `<button class=\"pagination-button is-active\" id=\"pagination\" name=\"pagin\" >${item}</button>`;\r\n      }\r\n\r\n      return `<button class=\"pagination-button\" id=\"pagination\">${item}</button>`;\r\n    })\r\n    .join('');\r\n\r\n  paginationButton.innerHTML = '';\r\n  paginationButton.insertAdjacentHTML('beforeend', markup);\r\n  // window.scrollTo({ top: 0, behavior: 'smooth' });\r\n}\r\n\r\nfunction createArrayOfNumbers(currentPage) {\r\n  const arrayOfNumbers = [];\r\n  if (currentPage === 1) {\r\n    for (let i = 1; i <= 3; i += 1) {\r\n      arrayOfNumbers.push(i);\r\n    }\r\n  }\r\n\r\n  if (currentPage === totalPage) {\r\n    for (let i = currentPage; i > totalPage - 3; i -= 1) {\r\n      arrayOfNumbers.push(i);\r\n    }\r\n    return arrayOfNumbers.reverse();\r\n  } else if (currentPage > 1) {\r\n    arrayOfNumbers.push(currentPage - 1, currentPage, currentPage + 1);\r\n  }\r\n  return arrayOfNumbers;\r\n}\r\n\r\nfunction renderFilms(films) {\r\n  const markup = films.results\r\n    .map(({ title, vote_average, poster_path }) => {\r\n      const trimmedString = title.substring(0, 45);\r\n\r\n      return ` <div class=\"film-card\">\r\n       <a href=\"#\" class=\"film-card__link\">\r\n         <img\r\n           class=\"film-card__image\"\r\n           src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\r\n           alt=\"alt \"\r\n         />\r\n       </a>\r\n       <div class=\"film-card__description\">\r\n         <p class=\"film-card__text\">${trimmedString}</p>\r\n         <p class=\"film-card__text film-rating\">${vote_average}</p>\r\n       </div>\r\n     </div>`;\r\n    })\r\n    .join('');\r\n  gallery.innerHTML = '';\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n}\r\n","const BASE_LINK = 'https://api.themoviedb.org/3/';\r\nconst API_KEY = '2a16c6401fc5b60e749d1dab2b58b588';\r\n\r\nexport async function fetchSearchMovies(searchQuery, page = 1) {\r\n  const response = await fetch(\r\n    `${BASE_LINK}search/movie?api_key=${API_KEY}&language=en-US&query=${searchQuery}&page=${page}&include_adult=false`\r\n  );\r\n  return await response.json();\r\n}\r\n\r\nexport async function fetchPopularMovies(page = 1) {\r\n  const response = await fetch(\r\n    `${BASE_LINK}trending/movie/day?api_key=${API_KEY}&page=${page}`\r\n  );\r\n\r\n  return await response.json();\r\n}\r\n"],"names":["$cc51d12e45391ae3$var$searchForm","document","querySelector","$cc51d12e45391ae3$var$gallery","$cc51d12e45391ae3$var$paginationButton","$cc51d12e45391ae3$var$firstPageBtn","getElementById","$cc51d12e45391ae3$var$lastPageBtn","addEventListener","e","preventDefault","$cc51d12e45391ae3$var$searchQuery","currentTarget","elements","query","value","$cc51d12e45391ae3$var$currentPage","$cc51d12e45391ae3$var$renderPagination","$cc51d12e45391ae3$var$fetchMovies","target","className","Number","textContent","$cc51d12e45391ae3$var$totalPage","error","console","log","films","searchQuery","page","response","fetch","json","$ca9eff6234a4c8b6$export$58b279a398109e7d","$ca9eff6234a4c8b6$export$225b489b0d997c20","markup","results","map","title","vote_average","poster_path","substring","$cc51d12e45391ae3$var$renderFilms","total_pages","classList","add","remove","currentPage","arrayOfNumbers","i","push","reverse","$cc51d12e45391ae3$var$createArrayOfNumbers","item","join","innerHTML","insertAdjacentHTML"],"version":3,"file":"movie.56b8acae.js.map"}