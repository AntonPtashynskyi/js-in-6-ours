{"mappings":"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","sources":["Movie DB/components/fetchMovie.js","Movie DB/movie.js"],"sourcesContent":["const BASE_LINK = 'https://api.themoviedb.org/3/';\nconst API_KEY = '2a16c6401fc5b60e749d1dab2b58b588';\n\nexport async function fetchSearchMovies(searchQuery, page = 1) {\n  const response = await fetch(\n    `${BASE_LINK}search/movie?api_key=${API_KEY}&language=en-US&query=${searchQuery}&page=${page}&include_adult=false`\n  );\n  return await response.json();\n}\n\nexport async function fetchPopularMovies(page = 1) {\n  const response = await fetch(\n    `${BASE_LINK}trending/movie/day?api_key=${API_KEY}&page=${page}`\n  );\n\n  return await response.json();\n}\n\nexport async function fetchMovieById(movie_id) {\n  const response = await fetch(\n    `${BASE_LINK}movie/${movie_id}?api_key=${API_KEY}&language=en-US`\n  );\n}\n","import { fetchSearchMovies, fetchPopularMovies } from './components/fetchMovie';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.container-body');\nconst paginationButton = document.querySelector('.pagination-container-button');\nconst firstPageBtn = document.getElementById('fist-page-btn');\nconst lastPageBtn = document.getElementById('last-page-btn');\n\nsearchForm.addEventListener('submit', onSubmitForm);\npaginationButton.addEventListener('click', onPaginationButtonClick);\nfirstPageBtn.addEventListener('click', onFirstPageBtnClick);\nlastPageBtn.addEventListener('click', onLastPageBtnClick);\n\nlet currentPage = 1;\nlet totalPage = 1;\nlet searchQuery = '';\n\ntry {\n  fetchMovies();\n} catch (error) {\n  console.log(error);\n}\n\nasync function fetchMovies() {\n  let films = {};\n  if (searchQuery) {\n    films = await fetchSearchMovies(searchQuery, currentPage);\n  } else {\n    films = await fetchPopularMovies(currentPage);\n  }\n\n  renderFilms(films);\n  currentPage = films.page;\n  totalPage = films.total_pages;\n  renderPagination();\n}\n\nfunction onLastPageBtnClick() {\n  currentPage = totalPage;\n  fetchMovies();\n}\n\nfunction onFirstPageBtnClick() {\n  currentPage = 1;\n  fetchMovies();\n}\n\nfunction onPaginationButtonClick(e) {\n  if (e.target.className !== 'pagination-button') {\n    // isNaN\n    return;\n  }\n  currentPage = Number(e.target.textContent);\n\n  fetchMovies();\n  renderPagination();\n}\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  searchQuery = e.currentTarget.elements.query.value;\n  currentPage = 1;\n  renderPagination();\n  fetchMovies();\n}\n\nfunction renderPagination() {\n  displayAdditionalPaginationBtn();\n  const array = createArrayOfNumbers(currentPage, totalPage);\n\n  const markup = array\n    .map((item) => {\n      if (item === currentPage) {\n        return `<button class=\"pagination-button is-active\" id=\"pagination\" name=\"pagin\" >${item}</button>`;\n      }\n\n      return `<button class=\"pagination-button\" id=\"pagination\">${item}</button>`;\n    })\n    .join('');\n\n  paginationButton.innerHTML = '';\n  paginationButton.insertAdjacentHTML('beforeend', markup);\n  // window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nfunction displayAdditionalPaginationBtn() {\n  if (currentPage === 1 && totalPage === 0) {\n    firstPageBtn.classList.add('hidden');\n    lastPageBtn.classList.add('hidden');\n    showEmptyResult();\n  }\n  if (currentPage === 1) {\n    firstPageBtn.classList.add('hidden');\n  } else if (currentPage && totalPage === 1) {\n    firstPageBtn.classList.add('hidden');\n    lastPageBtn.classList.add('hidden');\n  }\n\n  if (currentPage > 1) {\n    firstPageBtn.classList.remove('hidden');\n  }\n  if (currentPage === totalPage) {\n    lastPageBtn.classList.add('hidden');\n  }\n  if (currentPage < totalPage) {\n    lastPageBtn.classList.remove('hidden');\n  }\n}\n\nfunction createArrayOfNumbers(start, end) {\n  let arrayOfNumbers = [];\n\n  if (start === 1 && end === 0) {\n    return arrayOfNumbers;\n  }\n\n  if (start === 2 && end === 2) {\n    for (let i = 1; i <= 2; i += 1) {\n      arrayOfNumbers.push(i);\n    }\n    return arrayOfNumbers;\n  }\n\n  if (start === 1 && end === 1) {\n    return arrayOfNumbers.push(1);\n  }\n\n  if (start === 1 && end === 2) {\n    for (let i = 1; i <= 2; i += 1) {\n      arrayOfNumbers.push(i);\n    }\n    return arrayOfNumbers;\n  }\n\n  if (start === 1) {\n    for (let i = 1; i <= 3; i += 1) {\n      arrayOfNumbers.push(i);\n    }\n    return arrayOfNumbers;\n  }\n\n  if (end === 0) {\n    return (arrayOfNumbers = []);\n  }\n\n  if (start === totalPage) {\n    for (let i = start; i > end - 3; i -= 1) {\n      arrayOfNumbers.push(i);\n    }\n    return arrayOfNumbers.reverse();\n  } else if (start > 1) {\n    arrayOfNumbers.push(start - 1, start, start + 1);\n  }\n\n  return arrayOfNumbers;\n}\n\nfunction renderFilms(films) {\n  const markup = films.results\n    .map(({ title, vote_average, poster_path, id }) => {\n      const trimmedString = title.substring(0, 35);\n\n      return `     <div class=\"film-card\" data-card=\"card\">\n      \n        <a href=\"#\" class=\"film-card__link\">\n          <img\n            class=\"film-card__image\"\n            src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n            alt=\"${title} \"\n            id=\"${id}\"\n          />\n           <div class=\"film-card__description\">\n        <p class=\"film-card__text\">${trimmedString}</p>\n        <span class=\"film-card__text film-rating\">${vote_average}</span>\n      </div>\n        </a>\n      \n     \n    </div>`;\n    })\n    .join('');\n  gallery.innerHTML = '';\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showEmptyResult() {\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    `<p class=\"bad-search-result\">Sorry, we don't find nothing!</p>`\n  );\n}\n"],"names":["$ca9eff6234a4c8b6$export$58b279a398109e7d","searchQuery","page","response","fetch","json","$ca9eff6234a4c8b6$export$225b489b0d997c20","$ca9eff6234a4c8b6$export$6d0761608aa90887","movie_id","$cc51d12e45391ae3$var$searchForm","document","querySelector","$cc51d12e45391ae3$var$gallery","$cc51d12e45391ae3$var$paginationButton","$cc51d12e45391ae3$var$firstPageBtn","getElementById","$cc51d12e45391ae3$var$lastPageBtn","addEventListener","e","preventDefault","$cc51d12e45391ae3$var$searchQuery","currentTarget","elements","query","value","$cc51d12e45391ae3$var$currentPage","$cc51d12e45391ae3$var$renderPagination","$cc51d12e45391ae3$var$fetchMovies","target","className","Number","textContent","$cc51d12e45391ae3$var$totalPage","error","console","log","films","$hoxVJ","fetchSearchMovies","fetchPopularMovies","markup","results","map","title","vote_average","poster_path","id","trimmedString","substring","$cc51d12e45391ae3$var$renderFilms","total_pages","classList","add","remove","$cc51d12e45391ae3$var$displayAdditionalPaginationBtn","start","end","arrayOfNumbers","i","push","reverse","$cc51d12e45391ae3$var$createArrayOfNumbers","item","join","innerHTML","insertAdjacentHTML"],"version":3,"file":"movie.082ac68a.js.map"}