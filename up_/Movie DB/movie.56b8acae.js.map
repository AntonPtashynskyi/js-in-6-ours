{"mappings":"AAEA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,mBACjCE,EAAmBH,SAASC,cAAc,gCAC1CG,EAAeJ,SAASK,eAAe,iBACvCC,EAAcN,SAASK,eAAe,iBAE5CN,EAAWQ,iBAAiB,mBAkDNC,GACpBA,EAAEC,iBACFC,EAAcF,EAAEG,cAAcC,SAASC,MAAMC,MAC7CC,EAAc,EACdC,IACAC,OAtDFd,EAAiBI,iBAAiB,kBAsCDC,GAC/B,GAA2B,sBAAvBA,EAAEU,OAAOC,UAEX,OAEFJ,EAAcK,OAAOZ,EAAEU,OAAOG,aAE9BJ,IACAD,OA7CFZ,EAAaG,iBAAiB,oBAiC5BQ,EAAc,EACdE,OAjCFX,EAAYC,iBAAiB,oBA2B3BQ,EAAcO,EACdL,OA1BF,IAAIF,EAAc,EACdO,EAAY,EACZZ,EAAc,GAElB,IACEO,IACA,MAAOM,GACPC,QAAQC,IAAIF,kBAGCN,IACb,IAAIS,EAAQ,GAEVA,EADEhB,uBCtBkCiB,EAAaC,EAAO,GAC1D,MAAMC,QAAiBC,MAAK,2GAC0CH,UAAoBC,yBAE1F,aAAaC,EAASE,ODmBNC,CAAkBtB,EAAaK,wBChBRa,EAAO,GAC9C,MAAMC,QAAiBC,MAAK,iGACgCF,KAG5D,aAAaC,EAASE,ODaNE,CAAmBlB,YAsFhBW,GACnB,MAAMQ,EAASR,EAAMS,QAClBC,KAAG,EAAGC,MAACA,EAAKC,aAAEA,EAAYC,YAAEA,KAGrB,6KAiBXA,yIAnB2BF,EAAMG,UAAU,EAAG,8JAtF7CC,CAAYf,GACZX,EAAcW,EAAME,KACpBN,EAAYI,EAAMgB,YAClB1B,aAgCOA,IACPZ,EAAauC,UAAUC,IAAI,UAEvB7B,EAAc,GAChBX,EAAauC,UAAUE,OAAO,UAE5B9B,IAAgBO,GAClBhB,EAAYqC,UAAUC,IAAI,UAExB7B,EAAcO,GAChBhB,EAAYqC,UAAUE,OAAO,UAG/B,MACMX,WAesBY,GAC5B,MAAMC,EAAiB,GACvB,GAAoB,IAAhBD,EACF,IAAK,IAAIE,EAAI,EAAGA,GAAK,EAAGA,GAAK,EAC3BD,EAAeE,KAAKD,GAIxB,GAAIF,IAAgBxB,EAAW,CAC7B,IAAK,IAAI0B,EAAIF,EAAaE,EAAI1B,EAAY,EAAG0B,GAAK,EAChDD,EAAeE,KAAKD,GAEtB,OAAOD,EAAeG,UACbJ,EAAc,GACvBC,EAAeE,KAAKH,EAAc,EAAGA,EAAaA,EAAc,GAElE,OAAOC,EAhCOI,CAAqBpC,GAEhCqB,KAAKgB,GACAA,IAASrC,EACL,6EAA8EqC,aAGhF,qDAAsDA,eAE7DC,KAAK,IAERlD,EAAiBmD,UAAY,GAC7BnD,EAAiBoD,mBAAmB,YAAarB","sources":["Movie DB/movie.js","Movie DB/components/fetchMovie.js"],"sourcesContent":["import { fetchSearchMovies, fetchPopularMovies } from './components/fetchMovie';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.container-body');\nconst paginationButton = document.querySelector('.pagination-container-button');\nconst firstPageBtn = document.getElementById('fist-page-btn');\nconst lastPageBtn = document.getElementById('last-page-btn');\n\nsearchForm.addEventListener('submit', onSubmitForm);\npaginationButton.addEventListener('click', onPaginationButtonClick);\nfirstPageBtn.addEventListener('click', onFirstPageBtnClick);\nlastPageBtn.addEventListener('click', onLastPageBtnClick);\n\nlet currentPage = 1;\nlet totalPage = 1;\nlet searchQuery = '';\n\ntry {\n  fetchMovies();\n} catch (error) {\n  console.log(error);\n}\n\nasync function fetchMovies() {\n  let films = {};\n  if (searchQuery) {\n    films = await fetchSearchMovies(searchQuery, currentPage);\n  } else {\n    films = await fetchPopularMovies(currentPage);\n  }\n\n  renderFilms(films);\n  currentPage = films.page;\n  totalPage = films.total_pages;\n  renderPagination();\n}\n\nfunction onLastPageBtnClick() {\n  currentPage = totalPage;\n  fetchMovies();\n}\n\nfunction onFirstPageBtnClick() {\n  currentPage = 1;\n  fetchMovies();\n}\n\nfunction onPaginationButtonClick(e) {\n  if (e.target.className !== 'pagination-button') {\n    // isNaN\n    return;\n  }\n  currentPage = Number(e.target.textContent);\n\n  fetchMovies();\n  renderPagination();\n}\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  searchQuery = e.currentTarget.elements.query.value;\n  currentPage = 1;\n  renderPagination();\n  fetchMovies();\n}\n\nfunction renderPagination() {\n  firstPageBtn.classList.add('hidden');\n\n  if (currentPage > 1) {\n    firstPageBtn.classList.remove('hidden');\n  }\n  if (currentPage === totalPage) {\n    lastPageBtn.classList.add('hidden');\n  }\n  if (currentPage < totalPage) {\n    lastPageBtn.classList.remove('hidden');\n  }\n\n  const array = createArrayOfNumbers(currentPage);\n  const markup = array\n    .map((item) => {\n      if (item === currentPage) {\n        return `<button class=\"pagination-button is-active\" id=\"pagination\" name=\"pagin\" >${item}</button>`;\n      }\n\n      return `<button class=\"pagination-button\" id=\"pagination\">${item}</button>`;\n    })\n    .join('');\n\n  paginationButton.innerHTML = '';\n  paginationButton.insertAdjacentHTML('beforeend', markup);\n  // window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nfunction createArrayOfNumbers(currentPage) {\n  const arrayOfNumbers = [];\n  if (currentPage === 1) {\n    for (let i = 1; i <= 3; i += 1) {\n      arrayOfNumbers.push(i);\n    }\n  }\n\n  if (currentPage === totalPage) {\n    for (let i = currentPage; i > totalPage - 3; i -= 1) {\n      arrayOfNumbers.push(i);\n    }\n    return arrayOfNumbers.reverse();\n  } else if (currentPage > 1) {\n    arrayOfNumbers.push(currentPage - 1, currentPage, currentPage + 1);\n  }\n  return arrayOfNumbers;\n}\n\nfunction renderFilms(films) {\n  const markup = films.results\n    .map(({ title, vote_average, poster_path }) => {\n      const trimmedString = title.substring(0, 45);\n\n      return ` <div class=\"film-card\">\n       <a href=\"#\" class=\"film-card__link\">\n         <img\n           class=\"film-card__image\"\n           src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n           alt=\"alt \"\n         />\n       </a>\n       <div class=\"film-card__description\">\n         <p class=\"film-card__text\">${trimmedString}</p>\n         <p class=\"film-card__text film-rating\">${vote_average}</p>\n       </div>\n     </div>`;\n    })\n    .join('');\n  gallery.innerHTML = '';\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","const BASE_LINK = 'https://api.themoviedb.org/3/';\nconst API_KEY = '2a16c6401fc5b60e749d1dab2b58b588';\n\nexport async function fetchSearchMovies(searchQuery, page = 1) {\n  const response = await fetch(\n    `${BASE_LINK}search/movie?api_key=${API_KEY}&language=en-US&query=${searchQuery}&page=${page}&include_adult=false`\n  );\n  return await response.json();\n}\n\nexport async function fetchPopularMovies(page = 1) {\n  const response = await fetch(\n    `${BASE_LINK}trending/movie/day?api_key=${API_KEY}&page=${page}`\n  );\n\n  return await response.json();\n}\n"],"names":["$cc51d12e45391ae3$var$searchForm","document","querySelector","$cc51d12e45391ae3$var$gallery","$cc51d12e45391ae3$var$paginationButton","$cc51d12e45391ae3$var$firstPageBtn","getElementById","$cc51d12e45391ae3$var$lastPageBtn","addEventListener","e","preventDefault","$cc51d12e45391ae3$var$searchQuery","currentTarget","elements","query","value","$cc51d12e45391ae3$var$currentPage","$cc51d12e45391ae3$var$renderPagination","$cc51d12e45391ae3$var$fetchMovies","target","className","Number","textContent","$cc51d12e45391ae3$var$totalPage","error","console","log","films","searchQuery","page","response","fetch","json","$ca9eff6234a4c8b6$export$58b279a398109e7d","$ca9eff6234a4c8b6$export$225b489b0d997c20","markup","results","map","title","vote_average","poster_path","substring","$cc51d12e45391ae3$var$renderFilms","total_pages","classList","add","remove","currentPage","arrayOfNumbers","i","push","reverse","$cc51d12e45391ae3$var$createArrayOfNumbers","item","join","innerHTML","insertAdjacentHTML"],"version":3,"file":"movie.56b8acae.js.map"}