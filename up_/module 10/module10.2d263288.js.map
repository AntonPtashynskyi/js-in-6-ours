{"mappings":"AAEA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAWF,SAASC,cAAc,6BAClCE,EAAYH,SAASC,cAAc,aAEnCG,EAAiB,wBCJnBC,KAAKC,YAAc,GACnBD,KAAKE,KAAO,EAGdC,cAAcC,GACZ,MAAMC,EAAG,uCAA0CL,KAAKC,4CAA4CD,KAAKE,OAOzG,OAAOI,MAAMD,EANG,CACdE,QAAS,CACPC,cAAe,sCAKhBC,MAAMC,GAAaA,EAASC,SAC5BF,MAAI,EAAGG,SAACA,MACPZ,KAAKE,MAAQ,EAENU,KAERC,OAAOC,IACNC,QAAQC,MAAMF,MAIpBG,YACEjB,KAAKE,KAAO,EAGVgB,YACF,OAAOlB,KAAKC,YAGViB,UAAMC,GACRnB,KAAKC,YAAckB,aDTdC,EAAeR,GACtBd,EAAUuB,mBAAmB,qBAGfT,GACd,OAAOA,EACJU,KAAG,EACAC,OAACA,EAAMC,YAAEA,EAAWC,WAAEA,EAAUC,MAAEA,EAAKrB,IAAEA,KAAK,+EAEnBoB,mFAENC,oCACFF,uBACZnB,kEAIVsB,KAAK,IAhBkCC,CAAOhB,IAnBnDlB,EAAWmC,iBAAiB,mBAGVC,GAChBA,EAAEC,iBAEFhC,EAAemB,MAAQY,EAAEE,cAAcC,SAASf,MAAMgB,MACtDnC,EAAekB,YACflB,EAAeI,gBAAgBM,MAAMG,IA+BrCd,EAAUqC,UAAY,GA7BpBf,EAAeR,SATnBf,EAASgC,iBAAiB,oBAcxB9B,EAAeI,gBAAgBM,KAAKW","sources":["module 10/classesCoding.js","module 10/api-service.js"],"sourcesContent":["import NewsApiService from './api-service.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMore = document.querySelector('[data-action=\"load-more\"]');\nconst container = document.querySelector('.articles');\n\nconst newsApiService = new NewsApiService();\n\nsearchForm.addEventListener('submit', onSearch);\nloadMore.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiService.query = e.currentTarget.elements.query.value; // получает доступ к методу класса set query и в конструктор класса записывает свойство query.\n  newsApiService.resetPage();\n  newsApiService.fetchArticles().then((articles) => {\n    clearArticlesContainer();\n    renderArticles(articles);\n  });\n}\n\nfunction onLoadMore() {\n  newsApiService.fetchArticles().then(renderArticles);\n}\n\nfunction renderArticles(articles) {\n  container.insertAdjacentHTML('beforeend', markup(articles));\n}\n\nfunction markup(articles) {\n  return articles\n    .map(\n      ({ author, description, urlToImage, title, url }) =>\n        ` <div class=\"card\" style=\"width: 18rem;\">\n  <img class=\"card-img-top\" src=\"${urlToImage}\" alt=\"Card image cap\">\n  <div class=\"card-body\">\n    <h5 class=\"card-title\">${title}</h5>\n    <p class=\"card-text\">${description}</p>\n    <a href=\"${url}\" class=\"btn btn-primary\">Go somewhere</a>\n  </div>\n</div>`\n    )\n    .join('');\n}\n\nfunction clearArticlesContainer() {\n  container.innerHTML = '';\n}\n","export default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles(q) {\n    const url = `https://newsapi.org/v2/everything?q=${this.searchQuery}&language=en&pageSize=10&page=${this.page}`;\n    const options = {\n      headers: {\n        Authorization: 'b29d46388ca946e8ba8f7c84607dbf2d',\n      },\n    };\n\n    return fetch(url, options)\n      .then((response) => response.json())\n      .then(({ articles }) => {\n        this.page += 1;\n\n        return articles;\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$44299e60660d81fe$var$searchForm","document","querySelector","$44299e60660d81fe$var$loadMore","$44299e60660d81fe$var$container","$44299e60660d81fe$var$newsApiService","this","searchQuery","page","fetchArticles","q","url","fetch","headers","Authorization","then","response","json","articles","catch","err","console","error","resetPage","query","newQuery","$44299e60660d81fe$var$renderArticles","insertAdjacentHTML","map","author","description","urlToImage","title","join","$44299e60660d81fe$var$markup","addEventListener","e","preventDefault","currentTarget","elements","value","innerHTML"],"version":3,"file":"module10.2d263288.js.map"}